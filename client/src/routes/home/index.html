<template>
  <require from="./tiles/config-tile.js"></require>
  <require from="../history/jobs"></require>
  <div class="page-header">
    <div class="title">
      Home
    </div>
    <div class="actions">
      <a href="https://github.com/williamthom-as/cure/tree/main/docs" target="_blank">
        Help <i class="fas fa-question-circle" aria-hidden="true"></i>
      </a>
    </div>
  </div>
  <div class="row mb-1-2">
    <div class="box-container">
      <div class="box">
        <div class="title">
          System Status
        </div>
        <div class="body medium-text text-green">
          OK
        </div>
      </div>
      <div class="box">
        <div class="title">
          Configuration
        </div>
        <div class="body medium-text">
          <config-tile></config-tile>
        </div>
      </div>
      <div class="box">
        <div class="title">
          Total Runs
        </div>
        <div class="body medium-text">
          <span if.bind="!isProcessing">
            ${jobs.length}
          </span>
          <spinner if.bind="isProcessing"></spinner>
        </div>
      </div>
      <div class="box">
        <div class="title">
          Last Run
        </div>
        <div class="body medium-text">
          <div if.bind="!isProcessing">
            ${lastRun | timeAgo }
            <div class="text-small text-center">
              ${lastRun}
            </div>
          </div>
          <div if.bind="isProcessing">
            <spinner ></spinner>
          </div>
        </div>
      </div>
      <div class="box">
        <div class="title">
          Templates
        </div>
        <div class="body medium-text">
          <span if.bind="!isProcessing">
            ${templates.length}
          </span>
          <spinner if.bind="isProcessing"></spinner>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <panel show-header.bind="true">
        <div slot="header">
          <div class="title">Last Runs</div>
        </div>
        <div slot="body">
          <jobs jobs.bind="lastJobsRun"></jobs>
        </div>
      </panel>
    </div>
  </div>
</template>